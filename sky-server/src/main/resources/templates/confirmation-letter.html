<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Booking Confirmation</title>
    <style>
        body {
            font-family: "Chinese", "Microsoft YaHei", "微软雅黑", "SimHei", "黑体", "SimSun", "宋体", Arial, sans-serif;
            margin: 0;
            padding: 10px;
            background-color: #f5f5f5;
            font-size: 11px;
            line-height: 1.4;
        }
        .container {
            max-width: 690px;
            margin: 0 auto;
            background-color: white;
            padding: 12px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            border-radius: 6px;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #d32f2f;
        }
        .logo-section {
            display: flex;
            align-items: center;
            flex: 1;
        }
        .logo-img {
            width: 70px;
            height: 52px;
            margin-right: 15px;
            object-fit: contain;
            border-radius: 6px;
        }
        /* 移除公司名称与标语显示 */
        .confirmation-title {
            flex: 1;
            text-align: center;
            font-size: 28px;
            font-weight: bold;
            color: #d32f2f;
            letter-spacing: 2px;
        }
        /* 移除公司联系方式显示 */
        .booking-info {
            background-color: #f9f9f9;
            padding: 10px 12px;
            margin-bottom: 20px;
            border-radius: 6px;
            display: flex;
            justify-content: space-between;
            page-break-inside: avoid;
        }
        .info-section {
            width: 48%;
        }
        .info-row {
            display: flex;
            margin-bottom: 6px;
        }
        .info-label {
            font-weight: bold;
            width: 100px;
            color: #333;
            font-size: 10px;
        }
        .info-value {
            color: #666;
            font-size: 10px;
        }
        .tour-details {
            background-color: #ffffff;
            border: 1px solid #e5e5e5;
            padding: 10px 12px;
            margin-bottom: 20px;
            border-radius: 6px;
            page-break-inside: avoid;
        }
        .tour-title {
            font-size: 16px;
            font-weight: bold;
            color: #d32f2f;
            margin-bottom: 10px;
            text-align: center;
        }
        .tour-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        .tour-column {
            width: 48%;
        }
        .itinerary-section {
            background-color: #ffffff;
            border: 1px solid #e5e5e5;
            padding: 10px 12px;
            margin-bottom: 20px;
            border-radius: 6px;
            page-break-inside: avoid;
        }
        .itinerary-title {
            font-size: 16px;
            font-weight: bold;
            color: #d32f2f;
            margin-bottom: 15px;
            text-align: center;
        }
        .itinerary-item {
            background-color: white;
            border: 1px solid #ddd;
            margin-bottom: 8px;
            padding: 8px 10px;
            border-radius: 4px;
        }
        .itinerary-item:last-child {
            margin-bottom: 0;
        }
        .itinerary-day {
            font-weight: bold;
            color: #d32f2f;
            font-size: 11px;
            margin-bottom: 4px;
        }
        .itinerary-activity {
            font-weight: bold;
            color: #333;
            font-size: 10px;
            margin-bottom: 2px;
        }
        .itinerary-description {
            color: #666;
            font-size: 9px;
            line-height: 1.3;
        }
        .passenger-section { margin-bottom: 14px; page-break-inside: avoid; }
        .passenger-title {
            font-size: 14px;
            font-weight: bold;
            color: #d32f2f;
            margin-bottom: 10px;
            text-align: center;
        }
        .passenger-table {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        .passenger-table th, .passenger-table td { border: 1px solid #ddd; padding: 6px 8px; text-align: left; font-size: 10px; }
        .passenger-table th {
            background-color: #d32f2f;
            color: white;
            font-weight: bold;
        }
        .emergency-contact {
            background-color: #ffffff;
            border: 1px solid #e5e5e5;
            padding: 10px 12px;
            margin-bottom: 20px;
            border-radius: 6px;
            text-align: center;
            page-break-inside: avoid;
        }
        .emergency-title {
            font-size: 16px;
            font-weight: bold;
            color: #d32f2f;
            margin-bottom: 10px;
        }
        .emergency-content {
            font-size: 12px;
            color: #333;
            line-height: 1.5;
        }
        .page-break { display: none; }
        
        /* 避免大空白：允许自然分页，尽量不强制分页 */
        .important-notice { page-break-inside: avoid; }
        .important-notice { background-color: #ffffff; border: 1px solid #e5e5e5; padding: 10px 12px; margin-bottom: 16px; border-radius: 6px; }
        .notice-title {
            font-size: 14px;
            font-weight: bold;
            color: #d32f2f;
            margin-bottom: 10px;
        }
        .notice-content {
            font-size: 11px;
            color: #333;
            line-height: 1.4;
        }
        .footer {
            text-align: center;
            margin-top: 20px;
            padding-top: 15px;
            border-top: 1px solid #eee;
            color: #666;
            font-size: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
    <div class="header">
            
            <div>
                <div class="logo-section">
                    <img th:src="${logoDataUrl}" class="logo-img"/>
                </div>
            </div>
            
        </div>
        <div class="confirmation-title">CONFIRMATION LETTER</div>
        <!-- Booking Information -->
        <div class="booking-info">
            <div class="info-section">
                <div class="info-row">
                    <span class="info-label">Confirmation Date/确认日期:</span>
                    <span class="info-value" th:text="${confirmationDate}"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Booking Reference/订单号:</span>
                    <span class="info-value" th:text="${orderNumber}"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Tour Date/参团日期:</span>
                    <span class="info-value" th:text="${tourDetails != null ? tourDetails.startDate : 'N/A'}"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Total Passengers/总人数:</span>
                    <span class="info-value" th:text="${tourDetails != null ? (tourDetails.adultCount + tourDetails.childCount) : 'N/A'}"></span>
                </div>
            </div>

            <div class="info-section">
                <div class="info-row">
                    <span class="info-label">Agent/代理商:</span>
                    <span class="info-value" th:text="${tourDetails != null ? (tourDetails.agentName ?: 'N/A') : 'N/A'}"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Contact Person/联系人:</span>
                    <span class="info-value" th:text="${tourDetails != null ? tourDetails.contactPerson : 'N/A'}"></span>
                </div>
                <div class="info-row">
                    <span class="info-label">Contact Phone/联系电话:</span>
                    <span class="info-value" th:text="${tourDetails != null ? tourDetails.contactPhone : 'N/A'}"></span>
                </div>
            </div>
        </div>

        <!-- Tour Details -->
        <div class="tour-details">
            <div class="tour-title" th:text="${tourDetails != null ? tourDetails.tourName : 'N/A'}"></div>
            <div class="tour-info">
                <div class="tour-column">
                    <div class="info-row">
                        <span class="info-label">Start Date/出发日期:</span>
                        <span class="info-value" th:text="${tourDetails != null ? tourDetails.startDate : 'N/A'}"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">End Date/结束日期:</span>
                        <span class="info-value" th:text="${tourDetails != null ? tourDetails.endDate : 'N/A'}"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Hotel Level/酒店等级:</span>
                        <span class="info-value" th:text="${tourDetails != null ? tourDetails.hotelLevel : 'N/A'}"></span>
                    </div>
                </div>
                <div class="tour-column">
                    <div class="info-row">
                        <span class="info-label">Adults/成人:</span>
                        <span class="info-value" th:text="${tourDetails != null ? tourDetails.adultCount : 'N/A'}"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Children/儿童:</span>
                        <span class="info-value" th:text="${tourDetails != null ? tourDetails.childCount : 'N/A'}"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Pickup Location/接车地点:</span>
                        <span class="info-value" th:text="${tourDetails != null ? tourDetails.pickupLocation : 'N/A'}"></span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Dropoff Location/送达地点:</span>
                        <span class="info-value" th:text="${tourDetails != null ? tourDetails.dropoffLocation : 'N/A'}"></span>
                    </div>
                </div>
        </div>
    </div>

        <!-- Itinerary Section -->
        <div class="itinerary-section" th:if="${tourDetails != null && tourDetails.itinerary != null && !#lists.isEmpty(tourDetails.itinerary)}">
            <div class="itinerary-title">行程安排 / Tour Itinerary</div>
            <div th:each="item, iterStat : ${tourDetails.itinerary}" class="itinerary-item">
                <!-- 团队游格式 -->
                <div th:if="${tourDetails.tourType == 'group_tour'}" class="itinerary-day" 
                     th:text="'第' + ${item.day_number} + '天'"></div>
                
                <!-- 一日游格式 -->
                <div th:if="${tourDetails.tourType == 'day_tour'}" class="itinerary-day" 
                     th:text="'活动' + ${item.display_order}"></div>
                
                <div class="itinerary-activity" th:text="${item.title}"></div>
                <div class="itinerary-description" th:text="${item.description}"></div>
                
            </div>
        </div>

                <!-- Passenger Information -->
        <div class="passenger-section" th:if="${tourDetails != null && tourDetails.passengers != null && !#lists.isEmpty(tourDetails.passengers)}">
            <div class="passenger-title">Passenger Information/乘客信息</div>
            <table class="passenger-table">
                <thead>
                    <tr>
                        <th>Full Name/姓名</th>
                        <th>Phone/电话</th>
                        <th>WeChat ID/微信号</th>
                        <th>Type/类型</th>
                        <th>Child Age/儿童年龄</th>
            </tr>
                </thead>
                <tbody>
                    <tr th:each="passenger : ${tourDetails.passengers}">
                        <td th:text="${passenger.fullName}"></td>
                        <td th:text="${passenger.phone}"></td>
                        <td th:text="${passenger.wechatId}"></td>
                        <td th:text="${passenger.isChild != null && passenger.isChild ? 'Child/儿童' : 'Adult/成人'}"></td>
                        <td th:text="${passenger.isChild != null && passenger.isChild ? (passenger.childAge != null ? passenger.childAge : 'N/A') : 'N/A'}"></td>
            </tr>
                </tbody>
        </table>
    </div>

        <!-- Emergency Contact -->
        <div class="emergency-contact">
            <div class="emergency-title">24-Hour Emergency Contact/24小时紧急联系电话</div>
            <div class="emergency-content">
                <strong>Chinese Service/中文服务:</strong> +61 433 424 877<br/>
                <strong>English Service/英文服务:</strong> +61 433 424 877<br/>
                <strong>Please contact us immediately in case of emergency/紧急情况请立即联系我们</strong>
            </div>
        </div>

        <!-- Important Notice -->
        <div class="important-notice">
            <div class="notice-title">Important Notice/重要提醒</div>
            <div class="notice-content">
                <strong>中文：</strong><br/>
                • 请在出发前24小时确认行程安排，如有任何变更请及时联系我们<br/>
                • 请携带有效身份证件（护照或驾照），部分景点可能需要验证身份<br/>
                • 如需要取消或修改行程，请提前48小时通知，以避免产生额外费用<br/>
                • 天气因素可能影响行程安排，我们会及时通知您并协助调整<br/>
                • 请准时到达指定接车地点，司机导游会在约定时间等候15分钟<br/>
                • 建议携带适合当地天气的服装和必要的个人物品<br/>
                • 如有特殊饮食要求或身体状况需要特别注意，请提前告知<br/>
                • 行程中请保管好个人贵重物品，公司不承担遗失责任<br/>
                • 请尊重当地文化和环境，遵守导游的安全提醒<br/>
                • 如对服务有任何意见或建议，欢迎随时联系我们<br/><br/>
                
                <strong>English:</strong><br/>
                • Please confirm your itinerary 24 hours before departure, and contact us promptly for any changes<br/>
                • Please bring valid identification documents (passport or driver's license), as some attractions may require ID verification<br/>
                • For cancellation or modification, please notify us 48 hours in advance to avoid additional charges<br/>
                • Weather conditions may affect the itinerary, we will notify you promptly and assist with adjustments<br/>
                • Please arrive at the designated pickup location on time, driver-guide will wait for 15 minutes<br/>
                • It is recommended to bring clothing suitable for local weather and necessary personal items<br/>
                • If you have special dietary requirements or health conditions requiring attention, please inform us in advance<br/>
                • Please take care of your personal valuables during the tour, the company is not responsible for loss<br/>
                • Please respect local culture and environment, and follow the guide's safety reminders<br/>
                • If you have any comments or suggestions about our service, please feel free to contact us<br/>
            </div>
        </div>

        <!-- Additional Terms -->
        <div class="important-notice">
            <div class="notice-title">Terms of Service/服务条款</div>
            <div class="notice-content">
                <strong>中文：</strong><br/>
                • 本确认单是您与Happy Tassie Holiday之间服务合同的重要组成部分<br/>
                • 行程价格已包含导游服务费、交通费用和行程中标明的门票费用<br/>
                • 不包含个人消费、小费、餐费（除特别标明）和保险费用<br/>
                • 因个人原因导致的行程变更或取消，相关费用由客户承担<br/>
                • 如遇不可抗力因素（自然灾害、政府政策等），我们有权调整行程<br/>
                • 最终解释权归Happy Tassie Holiday所有<br/><br/>
                
                <strong>English:</strong><br/>
                • This confirmation letter is an important part of the service contract between you and Happy Tassie Holiday<br/>
                • The tour price includes guide service fees, transportation costs and entrance fees specified in the itinerary<br/>
                • Does not include personal expenses, tips, meal costs (unless specified) and insurance fees<br/>
                • Costs arising from itinerary changes or cancellations due to personal reasons shall be borne by the customer<br/>
                • In case of force majeure (natural disasters, government policies, etc.), we reserve the right to adjust the itinerary<br/>
                • Final interpretation rights belong to Happy Tassie Holiday<br/>
            </div>
        </div>

        <!-- Contact Information -->
        <div class="important-notice">
            <div class="notice-title">Contact Information/联系方式</div>
            <div class="notice-content">
                <strong>Office Hours/办公时间:</strong> Mon-Fri 9:00-17:00 / 周一至周五 9:00-17:00<br/>
                <strong>24-Hour Emergency/24小时紧急联系:</strong> +61 433 424 877<br/>
                <strong>WeChat Service/微信客服:</strong> HappyTassieHoliday<br/>
                <strong>Email/邮箱:</strong> booking@htas.com.au<br/>
                <strong>Website/网站:</strong> www.htas.com.au<br/>
                <strong>Address/地址:</strong> Shop 4B 234-238 Sandy Bay Rd, SANDY BAY, TAS, 7005, Australia<br/>
        </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            Copyright © 2024 Happy Tassie Holiday Pty Ltd. All rights reserved.<br/>
            版权所有 © 2024 Happy Tassie Holiday Pty Ltd. 保留所有权利。
        </div>
    </div>
</body>
</html> 